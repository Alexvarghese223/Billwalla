<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BillWalla - Simple Billing for Shop Keepers</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0049ff',
                    },
                },
            },
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js for dashboard charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .slide-in {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
        }
        .slide-in.active {
            transform: translateX(0);
        }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- Alpine.js for UI interactions -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <div x-data="billWallaApp()" class="flex flex-col h-screen">
        <!-- Top Navbar -->
        <header class="bg-gray-800 border-b border-gray-700 fixed top-0 w-full z-10">
            <div class="flex justify-between items-center px-4 py-3">
                <div class="flex items-center">
                    <button @click="toggleSidebar" class="mr-3 text-white">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 class="text-xl font-bold text-primary">BillWalla</h1>
                </div>
                <div class="flex items-center">
                    <template x-if="!user">
                        <button @click="showSection('login')" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                            Login
                        </button>
                    </template>
                    <template x-if="user">
                        <div class="flex items-center">
                            <span x-text="user.email" class="mr-2 text-sm hidden md:inline"></span>
                            <button @click="logout" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md text-sm">
                                Logout
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <div x-cloak x-show="sidebarOpen" @click="sidebarOpen = false" class="fixed inset-0 bg-black bg-opacity-50 z-20"></div>
        <div x-cloak :class="{'active': sidebarOpen}" class="fixed top-0 left-0 h-full w-64 bg-gray-800 z-30 slide-in shadow-lg">
            <div class="p-4 border-b border-gray-700">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold text-primary">BillWalla</h2>
                    <button @click="toggleSidebar" class="text-white">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <nav class="mt-4">
                <template x-if="user">
                    <ul>
                        <li>
                            <a @click="showSection('dashboard'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-tachometer-alt mr-2"></i> Dashboard
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('billing'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-file-invoice mr-2"></i> Billing
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('inventory'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-boxes mr-2"></i> Inventory
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('customers'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-users mr-2"></i> Customers
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('transactions'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-exchange-alt mr-2"></i> Transactions
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('todo'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-tasks mr-2"></i> To-Do List
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('security'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-lock mr-2"></i> Security
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('settings'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-cog mr-2"></i> Settings
                            </a>
                        </li>
                        <li>
                            <a @click="showSection('privacy'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-shield-alt mr-2"></i> Privacy
                            </a>
                        </li>
                    </ul>
                </template>
                <template x-if="!user">
                    <ul>
                        <li>
                            <a @click="showSection('login'); toggleSidebar()" class="block px-4 py-2 text-white hover:bg-gray-700 cursor-pointer">
                                <i class="fas fa-sign-in-alt mr-2"></i> Login
                            </a>
                        </li>
                    </ul>
                </template>
            </nav>
        </div>

        <!-- Lock Screen -->
        <div x-cloak x-show="security.isLocked" class="fixed inset-0 bg-gray-900 z-50 flex flex-col items-center justify-center">
            <div class="text-center p-8 max-w-md">
                <i class="fas fa-lock text-5xl text-primary mb-4"></i>
                <h2 class="text-2xl font-bold mb-6">App Locked</h2>
                <p class="mb-6">Enter your PIN to unlock</p>
                
                <div class="mb-4">
                    <input type="password" x-model="lockScreenPin" maxlength="4" placeholder="Enter PIN" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-white text-center text-2xl tracking-widest focus:outline-none focus:ring-2 focus:ring-primary">
                </div>
                
                <button @click="unlockApp" class="w-full bg-primary hover:bg-blue-700 text-white py-2 px-4 rounded-md transition duration-200">
                    Unlock
                </button>
                
                <p x-show="lockError" class="mt-4 text-red-500" x-text="lockError"></p>
            </div>
        </div>

        <!-- Main Content -->
        <main class="flex-grow mt-16 mb-16 p-4 overflow-y-auto">
            <!-- Login Section -->
            <section x-show="currentSection === 'login'" class="max-w-md mx-auto bg-gray-800 p-6 rounded-lg shadow-lg">
                <h2 class="text-2xl font-bold mb-6 text-center text-primary">Login to BillWalla</h2>
                <div x-show="loginError" class="bg-red-500 text-white p-3 rounded mb-4" x-text="loginError"></div>
                <form @submit.prevent="login">
                    <div class="mb-4">
                        <label for="email" class="block text-sm font-medium mb-1">Email</label>
                        <input type="email" id="email" x-model="loginForm.email" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div class="mb-6">
                        <label for="password" class="block text-sm font-medium mb-1">Password</label>
                        <input type="password" id="password" x-model="loginForm.password" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <button type="submit" class="w-full bg-primary hover:bg-blue-700 text-white py-2 px-4 rounded-md transition duration-200">
                        Login
                    </button>
                    <div class="mt-4 text-center">
                        <button type="button" @click="showRegisterForm = !showRegisterForm" class="text-primary hover:underline">
                            <span x-text="showRegisterForm ? 'Back to Login' : 'Create New Account'"></span>
                        </button>
                    </div>
                </form>

                <!-- Register Form -->
                <div x-show="showRegisterForm" class="mt-6">
                    <h3 class="text-xl font-bold mb-4 text-center">Create New Account</h3>
                    <div x-show="registerError" class="bg-red-500 text-white p-3 rounded mb-4" x-text="registerError"></div>
                    <form @submit.prevent="register">
                        <div class="mb-4">
                            <label for="reg-email" class="block text-sm font-medium mb-1">Email</label>
                            <input type="email" id="reg-email" x-model="registerForm.email" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <div class="mb-4">
                            <label for="reg-password" class="block text-sm font-medium mb-1">Password</label>
                            <input type="password" id="reg-password" x-model="registerForm.password" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <div class="mb-6">
                            <label for="shop-name" class="block text-sm font-medium mb-1">Shop Name</label>
                            <input type="text" id="shop-name" x-model="registerForm.shopName" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <button type="submit" class="w-full bg-primary hover:bg-blue-700 text-white py-2 px-4 rounded-md transition duration-200">
                            Register
                        </button>
                    </form>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section x-show="currentSection === 'dashboard' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Dashboard</h2>
                
                <!-- Summary Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Today's Sales</h3>
                        <p class="text-2xl font-bold text-primary" x-text="'₹' + calculateTodaySales().toFixed(2)"></p>
                        <p class="text-sm text-gray-400">Total sales for today</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Pending Orders</h3>
                        <p class="text-2xl font-bold text-yellow-500" x-text="pendingOrders"></p>
                        <p class="text-sm text-gray-400">Orders awaiting fulfillment</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Low Stock Items</h3>
                        <p class="text-2xl font-bold text-red-500" x-text="lowStockItems"></p>
                        <p class="text-sm text-gray-400">Items with stock < 10</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Total Customers</h3>
                        <p class="text-2xl font-bold text-green-500" x-text="customers.list.length"></p>
                        <p class="text-sm text-gray-400">Registered customers</p>
                    </div>
                </div>
                
                <!-- Sales Chart -->
                <div class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                    <h3 class="text-lg font-semibold mb-3">Sales Overview</h3>
                    <div class="h-64 w-full">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
                
                <!-- Recent Transactions -->
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden mb-6">
                    <div class="p-4 border-b border-gray-700">
                        <h3 class="text-lg font-semibold">Recent Transactions</h3>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-700">
                            <thead class="bg-gray-900">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Bill #</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Customer</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Total</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Payment</th>
                                </tr>
                            </thead>
                            <tbody class="bg-gray-800 divide-y divide-gray-700">
                                <template x-for="transaction in transactions.list.slice(0, 5)" :key="transaction.id">
                                    <tr class="hover:bg-gray-700">
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="transaction.id"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="new Date(transaction.date).toLocaleString()"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="transaction.customerName"></td>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium" x-text="'₹' + transaction.total.toFixed(2)"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="{
                                                'bg-green-900 text-green-300': transaction.paymentMethod === 'cash',
                                                'bg-blue-900 text-blue-300': transaction.paymentMethod === 'upi',
                                                'bg-purple-900 text-purple-300': transaction.paymentMethod === 'card'
                                            }" class="px-2 py-1 rounded-full text-xs">
                                                <span x-text="transaction.paymentMethod.toUpperCase()"></span>
                                            </span>
                                        </td>
                                    </tr>
                                </template>
                                <tr x-show="transactions.list.length === 0">
                                    <td colspan="5" class="px-6 py-4 text-center text-gray-400">No transactions found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- To-Do List -->
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                        <h3 class="text-lg font-semibold">To-Do List</h3>
                        <button @click="showAddTodoForm = true" class="bg-primary hover:bg-blue-700 text-white px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-plus mr-1"></i> Add Task
                        </button>
                    </div>
                    <div class="p-4">
                        <ul class="divide-y divide-gray-700">
                            <template x-for="(todo, index) in todos" :key="index">
                                <li class="py-3 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <input type="checkbox" :id="'todo-' + index" x-model="todo.completed" @change="saveTodos" class="mr-3 rounded bg-gray-700 border-gray-600 text-primary focus:ring-primary">
                                        <label :for="'todo-' + index" :class="{'line-through text-gray-500': todo.completed}" x-text="todo.text"></label>
                                    </div>
                                    <button @click="deleteTodo(index)" class="text-red-400 hover:text-red-300">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </li>
                            </template>
                            <li x-show="todos.length === 0" class="py-3 text-center text-gray-400">
                                No tasks added yet
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Billing Section -->
            <section x-show="currentSection === 'billing' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Billing</h2>
                
                <!-- Customer Information -->
                <div class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                    <h3 class="text-lg font-semibold mb-3">Customer Information</h3>
                    <div class="flex flex-col md:flex-row gap-4 mb-4">
                        <div class="flex-1">
                            <label for="customer-phone" class="block text-sm font-medium mb-1">Phone Number</label>
                            <div class="flex">
                                <input type="tel" id="customer-phone" x-model="billing.customerPhone" class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-l-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <button @click="findCustomer" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-r-md">
                                    Find
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- New Customer Form -->
                    <div x-show="!billing.existingCustomer && billing.showCustomerForm" class="mt-4 border-t border-gray-700 pt-4">
                        <h4 class="text-md font-medium mb-3">New Customer Details</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="customer-name" class="block text-sm font-medium mb-1">Name</label>
                                <input type="text" id="customer-name" x-model="billing.newCustomer.name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div>
                                <label for="customer-email" class="block text-sm font-medium mb-1">Email (Optional)</label>
                                <input type="email" id="customer-email" x-model="billing.newCustomer.email" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="md:col-span-2">
                                <label for="customer-address" class="block text-sm font-medium mb-1">Address</label>
                                <textarea id="customer-address" x-model="billing.newCustomer.address" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                        </div>
                        <button @click="saveNewCustomer" class="mt-3 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                            Save Customer
                        </button>
                    </div>
                    
                    <!-- Existing Customer Details -->
                    <div x-show="billing.existingCustomer" class="mt-4 border-t border-gray-700 pt-4">
                        <div class="flex justify-between items-start">
                            <h4 class="text-md font-medium mb-3">Customer Details</h4>
                            <button @click="editCustomer" class="text-primary hover:text-blue-400">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-sm text-gray-400">Name</p>
                                <p x-text="billing.existingCustomer.name" class="font-medium"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Phone</p>
                                <p x-text="billing.existingCustomer.phone" class="font-medium"></p>
                            </div>
                            <div x-show="billing.existingCustomer.email">
                                <p class="text-sm text-gray-400">Email</p>
                                <p x-text="billing.existingCustomer.email" class="font-medium"></p>
                            </div>
                            <div class="md:col-span-2">
                                <p class="text-sm text-gray-400">Address</p>
                                <p x-text="billing.existingCustomer.address" class="font-medium"></p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Edit Customer Form -->
                    <div x-show="billing.showEditForm" class="mt-4 border-t border-gray-700 pt-4">
                        <h4 class="text-md font-medium mb-3">Edit Customer Details</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="edit-customer-name" class="block text-sm font-medium mb-1">Name</label>
                                <input type="text" id="edit-customer-name" x-model="billing.editCustomer.name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div>
                                <label for="edit-customer-email" class="block text-sm font-medium mb-1">Email (Optional)</label>
                                <input type="email" id="edit-customer-email" x-model="billing.editCustomer.email" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="md:col-span-2">
                                <label for="edit-customer-address" class="block text-sm font-medium mb-1">Address</label>
                                <textarea id="edit-customer-address" x-model="billing.editCustomer.address" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                        </div>
                        <div class="flex gap-2 mt-3">
                            <button @click="updateCustomer" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md">
                                Update
                            </button>
                            <button @click="cancelEdit" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Product Search and Billing -->
                <div class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                    <h3 class="text-lg font-semibold mb-3">Add Products</h3>
                    <div class="flex flex-col md:flex-row gap-4 mb-4">
                        <div class="flex-1">
                            <label for="product-search" class="block text-sm font-medium mb-1">Search Product (Name or ID)</label>
                            <input type="text" id="product-search" x-model="billing.productSearch" @input="searchProducts" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                    </div>
                    
                    <!-- Search Results -->
                    <div x-show="billing.searchResults.length > 0" class="mt-2 mb-4 max-h-60 overflow-y-auto bg-gray-700 rounded-md">
                        <table class="min-w-full">
                            <thead class="bg-gray-800 sticky top-0">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">ID</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Name</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Price</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Stock</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-600">
                                <template x-for="product in billing.searchResults" :key="product.id">
                                    <tr class="hover:bg-gray-600">
                                        <td class="px-4 py-2 whitespace-nowrap" x-text="product.id"></td>
                                        <td class="px-4 py-2 whitespace-nowrap" x-text="product.name"></td>
                                        <td class="px-4 py-2 whitespace-nowrap" x-text="'₹' + product.price.toFixed(2)"></td>
                                        <td class="px-4 py-2 whitespace-nowrap" x-text="product.stock"></td>
                                        <td class="px-4 py-2 whitespace-nowrap">
                                            <button @click="addToBill(product)" class="bg-primary hover:bg-blue-700 text-white px-2 py-1 rounded-md text-sm">
                                                Add
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Current Bill -->
                    <div class="mt-4">
                        <h3 class="text-lg font-semibold mb-3">Current Bill</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-gray-700 rounded-md">
                                <thead class="bg-gray-800">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Product</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Price</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Quantity</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Total</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-600">
                                    <template x-for="(item, index) in billing.items" :key="index">
                                        <tr>
                                            <td class="px-4 py-2" x-text="item.name"></td>
                                            <td class="px-4 py-2" x-text="'₹' + item.price.toFixed(2)"></td>
                                            <td class="px-4 py-2">
                                                <div class="flex items-center">
                                                    <button @click="decrementQuantity(index)" class="bg-gray-600 hover:bg-gray-500 text-white px-2 py-1 rounded-l-md">
                                                        -
                                                    </button>
                                                    <input type="number" x-model.number="item.quantity" min="1" @change="updateBillItem(index)" class="w-16 text-center bg-gray-700 border-t border-b border-gray-600 text-white focus:outline-none">
                                                    <button @click="incrementQuantity(index)" class="bg-gray-600 hover:bg-gray-500 text-white px-2 py-1 rounded-r-md">
                                                        +
                                                    </button>
                                                </div>
                                            </td>
                                            <td class="px-4 py-2" x-text="'₹' + (item.price * item.quantity).toFixed(2)"></td>
                                            <td class="px-4 py-2">
                                                <button @click="removeFromBill(index)" class="bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded-md">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </template>
                                    <tr x-show="billing.items.length === 0">
                                        <td colspan="5" class="px-4 py-3 text-center text-gray-400">No items added to bill</td>
                                    </tr>
                                </tbody>
                                <tfoot class="bg-gray-800">
                                    <tr>
                                        <td colspan="3" class="px-4 py-2 text-right font-medium">Subtotal:</td>
                                        <td class="px-4 py-2 font-medium" x-text="'₹' + calculateSubtotal().toFixed(2)"></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td colspan="3" class="px-4 py-2 text-right font-medium">GST (18%):</td>
                                        <td class="px-4 py-2 font-medium" x-text="'₹' + calculateTax().toFixed(2)"></td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td colspan="3" class="px-4 py-2 text-right font-bold">Total:</td>
                                        <td class="px-4 py-2 font-bold text-primary" x-text="'₹' + calculateTotal().toFixed(2)"></td>
                                        <td></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Payment Options -->
                <div class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                    <h3 class="text-lg font-semibold mb-3">Payment</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium mb-2">Payment Method</label>
                                <div class="flex flex-wrap gap-2">
                                    <button @click="billing.paymentMethod = 'cash'" :class="{'bg-primary': billing.paymentMethod === 'cash', 'bg-gray-700': billing.paymentMethod !== 'cash'}" class="px-4 py-2 rounded-md text-white hover:bg-opacity-90 transition">
                                        <i class="fas fa-money-bill-wave mr-1"></i> Cash
                                    </button>
                                    <button @click="billing.paymentMethod = 'upi'" :class="{'bg-primary': billing.paymentMethod === 'upi', 'bg-gray-700': billing.paymentMethod !== 'upi'}" class="px-4 py-2 rounded-md text-white hover:bg-opacity-90 transition">
                                        <i class="fas fa-mobile-alt mr-1"></i> UPI
                                    </button>
                                    <button @click="billing.paymentMethod = 'card'" :class="{'bg-primary': billing.paymentMethod === 'card', 'bg-gray-700': billing.paymentMethod !== 'card'}" class="px-4 py-2 rounded-md text-white hover:bg-opacity-90 transition">
                                        <i class="fas fa-credit-card mr-1"></i> Card
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Cash Payment -->
                            <div x-show="billing.paymentMethod === 'cash'" class="mb-4">
                                <label for="cash-amount" class="block text-sm font-medium mb-1">Cash Amount</label>
                                <input type="number" id="cash-amount" x-model.number="billing.cashAmount" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <div class="mt-2">
                                    <p class="text-sm">Change to return: <span class="font-medium" x-text="'₹' + calculateChange().toFixed(2)"></span></p>
                                </div>
                            </div>
                            
                            <!-- UPI Payment -->
                            <div x-show="billing.paymentMethod === 'upi'" class="mb-4 text-center">
                                <p class="mb-2">Scan QR code to pay ₹<span x-text="calculateTotal().toFixed(2)"></span></p>
                                <div class="bg-white p-4 inline-block rounded-md">
                                    <div class="w-48 h-48 mx-auto bg-gray-200 flex items-center justify-center">
                                        <p class="text-black text-sm">UPI QR Code</p>
                                        <!-- In a real app, generate QR code dynamically -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Card Payment -->
                            <div x-show="billing.paymentMethod === 'card'" class="mb-4">
                                <p class="mb-2">Process card payment of ₹<span x-text="calculateTotal().toFixed(2)"></span> through your POS machine</p>
                                <div class="mt-2">
                                    <label for="transaction-id" class="block text-sm font-medium mb-1">Transaction ID (Optional)</label>
                                    <input type="text" id="transaction-id" x-model="billing.transactionId" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex flex-col justify-between">
                            <div>
                                <label for="bill-notes" class="block text-sm font-medium mb-1">Notes (Optional)</label>
                                <textarea id="bill-notes" x-model="billing.notes" rows="3" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                            
                            <div class="mt-4">
                                <button @click="completeBill" :disabled="!canCompleteBill()" :class="{'opacity-50 cursor-not-allowed': !canCompleteBill()}" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-md text-lg font-medium">
                                    Complete Bill
                                </button>
                                <p x-show="billing.errorMessage" class="mt-2 text-red-400 text-sm" x-text="billing.errorMessage"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Inventory Section -->
            <section x-show="currentSection === 'inventory' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Inventory Management</h2>
                
                <div class="flex flex-col md:flex-row gap-4 mb-6">
                    <div class="flex-1">
                        <input type="text" placeholder="Search inventory..." x-model="inventory.searchQuery" @input="searchInventory" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div class="flex gap-2">
                        <button @click="showAddProductForm" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-plus mr-1"></i> Add Product
                        </button>
                        <button @click="showCategoryModal = true" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-tags mr-1"></i> Categories
                        </button>
                        <button @click="showBulkUploadModal = true" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-file-upload mr-1"></i> Bulk Upload
                        </button>
                    </div>
                </div>
                
                <!-- Inventory Table -->
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-700">
                            <thead class="bg-gray-900">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Category</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Price</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Stock</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-gray-800 divide-y divide-gray-700">
                                <template x-for="product in inventory.filteredProducts" :key="product.id">
                                    <tr class="hover:bg-gray-700">
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="product.id"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="product.name"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="product.category"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="'₹' + product.price.toFixed(2)"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="{'text-red-500': product.stock < 10, 'text-yellow-500': product.stock >= 10 && product.stock < 20, 'text-green-500': product.stock >= 20}" x-text="product.stock"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex space-x-2">
                                                <button @click="editProduct(product)" class="text-blue-400 hover:text-blue-300">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button @click="deleteProduct(product.id)" class="text-red-400 hover:text-red-300">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                                <tr x-show="inventory.filteredProducts.length === 0">
                                    <td colspan="6" class="px-6 py-4 text-center text-gray-400">No products found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Add/Edit Product Modal -->
                <div x-show="inventory.showProductForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4" x-text="inventory.editMode ? 'Edit Product' : 'Add New Product'"></h3>
                        <form @submit.prevent="inventory.editMode ? updateProduct() : addProduct()">
                            <div class="mb-4">
                                <label for="product-id" class="block text-sm font-medium mb-1">Product ID</label>
                                <input type="text" id="product-id" x-model="inventory.currentProduct.id" :disabled="inventory.editMode" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <p x-show="inventory.idError" class="mt-1 text-red-500 text-sm" x-text="inventory.idError"></p>
                            </div>
                            <div class="mb-4">
                                <label for="product-name" class="block text-sm font-medium mb-1">Product Name</label>
                                <input type="text" id="product-name" x-model="inventory.currentProduct.name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="product-category" class="block text-sm font-medium mb-1">Category</label>
                                <select id="product-category" x-model="inventory.currentProduct.category" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                    <option value="">Select Category</option>
                                    <template x-for="category in inventory.categories" :key="category">
                                        <option :value="category" x-text="category"></option>
                                    </template>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="product-price" class="block text-sm font-medium mb-1">Price (₹)</label>
                                <input type="number" id="product-price" x-model.number="inventory.currentProduct.price" min="0" step="0.01" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="product-stock" class="block text-sm font-medium mb-1">Stock Quantity</label>
                                <input type="number" id="product-stock" x-model.number="inventory.currentProduct.stock" min="0" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="product-description" class="block text-sm font-medium mb-1">Description (Optional)</label>
                                <textarea id="product-description" x-model="inventory.currentProduct.description" rows="3" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                            <div class="flex justify-end space-x-3">
                                <button type="button" @click="closeProductForm" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                    Cancel
                                </button>
                                <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-700 text-white rounded-md">
                                    <span x-text="inventory.editMode ? 'Update' : 'Add'"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Categories Modal -->
                <div x-show="showCategoryModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">Manage Categories</h3>
                        <div class="mb-4">
                            <label for="new-category" class="block text-sm font-medium mb-1">Add New Category</label>
                            <div class="flex">
                                <input type="text" id="new-category" x-model="inventory.newCategory" class="flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-l-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <button @click="addCategory" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-r-md">
                                    Add
                                </button>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-md font-medium mb-2">Current Categories</h4>
                            <ul class="bg-gray-700 rounded-md divide-y divide-gray-600 max-h-60 overflow-y-auto">
                                <template x-for="(category, index) in inventory.categories" :key="index">
                                    <li class="px-3 py-2 flex justify-between items-center">
                                        <span x-text="category"></span>
                                        <button @click="deleteCategory(index)" class="text-red-400 hover:text-red-300">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </li>
                                </template>
                                <li x-show="inventory.categories.length === 0" class="px-3 py-2 text-gray-400">
                                    No categories added yet
                                </li>
                            </ul>
                        </div>
                        <div class="flex justify-end">
                            <button @click="showCategoryModal = false" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Bulk Upload Modal -->
                <div x-show="showBulkUploadModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4">Bulk Upload Products</h3>
                        <div class="mb-4">
                            <p class="text-sm text-gray-400 mb-2">Upload Excel/CSV file with product data</p>
                            <div class="border-2 border-dashed border-gray-600 rounded-md p-4 text-center">
                                <label for="file-upload" class="cursor-pointer">
                                    <i class="fas fa-file-upload text-2xl mb-2"></i>
                                    <p>Click to select file or drag and drop</p>
                                    <input id="file-upload" type="file" accept=".csv,.xlsx,.xls" class="hidden" @change="handleFileUpload">
                                </label>
                                <p x-show="inventory.uploadedFile" class="mt-2 text-green-400 text-sm" x-text="'Selected: ' + inventory.uploadedFile"></p>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-md font-medium mb-2">Template Format</h4>
                            <p class="text-sm text-gray-400">Your file should have these columns:</p>
                            <ul class="text-sm text-gray-400 list-disc list-inside mt-1">
                                <li>Product ID</li>
                                <li>Name</li>
                                <li>Category</li>
                                <li>Price</li>
                                <li>Stock</li>
                                <li>Description (optional)</li>
                            </ul>
                            <button class="mt-2 text-primary hover:text-blue-400 text-sm">
                                <i class="fas fa-download mr-1"></i> Download Template
                            </button>
                        </div>
                        <div class="flex justify-end space-x-3">
                            <button @click="showBulkUploadModal = false" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                Cancel
                            </button>
                            <button @click="processBulkUpload" :disabled="!inventory.uploadedFile" :class="{'opacity-50 cursor-not-allowed': !inventory.uploadedFile}" class="px-4 py-2 bg-primary hover:bg-blue-700 text-white rounded-md">
                                Upload
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customers Section -->
            <section x-show="currentSection === 'customers' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Customer Management</h2>
                
                <div class="flex flex-col md:flex-row gap-4 mb-6">
                    <div class="flex-1">
                        <input type="text" placeholder="Search customers..." x-model="customers.searchQuery" @input="searchCustomers" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <button @click="showAddCustomerForm" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                            <i class="fas fa-user-plus mr-1"></i> Add Customer
                        </button>
                    </div>
                </div>
                
                <!-- Customers Table -->
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-700">
                            <thead class="bg-gray-900">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Phone</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Email</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Visits</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Last Visit</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-gray-800 divide-y divide-gray-700">
                                <template x-for="customer in customers.filteredCustomers" :key="customer.phone">
                                    <tr class="hover:bg-gray-700">
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="customer.name"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="customer.phone"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="customer.email || '-'"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="customer.visits || 0"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="customer.lastVisit ? new Date(customer.lastVisit).toLocaleDateString() : '-'"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex space-x-2">
                                                <button @click="viewCustomerDetails(customer)" class="text-blue-400 hover:text-blue-300">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button @click="editCustomerDetails(customer)" class="text-blue-400 hover:text-blue-300">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button @click="deleteCustomer(customer.phone)" class="text-red-400 hover:text-red-300">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                                <tr x-show="customers.filteredCustomers.length === 0">
                                    <td colspan="6" class="px-6 py-4 text-center text-gray-400">No customers found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Add/Edit Customer Modal -->
                <div x-show="customers.showCustomerForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-md">
                        <h3 class="text-xl font-bold mb-4" x-text="customers.editMode ? 'Edit Customer' : 'Add New Customer'"></h3>
                        <form @submit.prevent="customers.editMode ? updateCustomerDetails() : addCustomer()">
                            <div class="mb-4">
                                <label for="customer-name" class="block text-sm font-medium mb-1">Name</label>
                                                                <input type="text" id="customer-name" x-model="customers.currentCustomer.name" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="customer-phone" class="block text-sm font-medium mb-1">Phone Number</label>
                                <input type="tel" id="customer-phone" x-model="customers.currentCustomer.phone" :disabled="customers.editMode" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <p x-show="customers.phoneError" class="mt-1 text-red-500 text-sm" x-text="customers.phoneError"></p>
                            </div>
                            <div class="mb-4">
                                <label for="customer-email" class="block text-sm font-medium mb-1">Email (Optional)</label>
                                <input type="email" id="customer-email" x-model="customers.currentCustomer.email" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="customer-address" class="block text-sm font-medium mb-1">Address</label>
                                <textarea id="customer-address" x-model="customers.currentCustomer.address" required rows="3" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                            <div class="flex justify-end space-x-3">
                                <button type="button" @click="closeCustomerForm" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                    Cancel
                                </button>
                                <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-700 text-white rounded-md">
                                    <span x-text="customers.editMode ? 'Update' : 'Add'"></span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <!-- Customer Details Modal -->
                <div x-show="customers.showDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-2xl">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold" x-text="customers.viewCustomer.name"></h3>
                            <button @click="customers.showDetailsModal = false" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div>
                                <p class="text-sm text-gray-400">Phone</p>
                                <p class="font-medium" x-text="customers.viewCustomer.phone"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Email</p>
                                <p class="font-medium" x-text="customers.viewCustomer.email || '-'"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Address</p>
                                <p class="font-medium" x-text="customers.viewCustomer.address"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Total Visits</p>
                                <p class="font-medium" x-text="customers.viewCustomer.visits || 0"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Last Visit</p>
                                <p class="font-medium" x-text="customers.viewCustomer.lastVisit ? new Date(customers.viewCustomer.lastVisit).toLocaleDateString() : '-'"></p>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-2">Purchase History</h4>
                            <div class="bg-gray-700 rounded-md overflow-hidden">
                                <table class="min-w-full divide-y divide-gray-600">
                                    <thead class="bg-gray-800">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Bill #</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Date</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Amount</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Payment</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-600">
                                        <template x-for="bill in customers.customerBills" :key="bill.id">
                                            <tr class="hover:bg-gray-600">
                                                <td class="px-4 py-2 whitespace-nowrap" x-text="bill.id"></td>
                                                <td class="px-4 py-2 whitespace-nowrap" x-text="new Date(bill.date).toLocaleDateString()"></td>
                                                <td class="px-4 py-2 whitespace-nowrap" x-text="'₹' + bill.total.toFixed(2)"></td>
                                                <td class="px-4 py-2 whitespace-nowrap" x-text="bill.paymentMethod"></td>
                                            </tr>
                                        </template>
                                        <tr x-show="customers.customerBills.length === 0">
                                            <td colspan="4" class="px-4 py-3 text-center text-gray-400">No purchase history</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="flex justify-end space-x-3">
                            <button @click="customers.showDetailsModal = false" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                Close
                            </button>
                            <button @click="editCustomerDetails(customers.viewCustomer); customers.showDetailsModal = false" class="px-4 py-2 bg-primary hover:bg-blue-700 text-white rounded-md">
                                Edit
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Transactions Section -->
            <section x-show="currentSection === 'transactions' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Transactions</h2>
                
                <div class="bg-gray-800 p-4 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <input type="text" placeholder="Search transactions..." x-model="transactions.searchQuery" @input="searchTransactions" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <div class="flex gap-2">
                            <select x-model="transactions.filterType" @change="filterTransactions" class="px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <option value="all">All Payments</option>
                                <option value="cash">Cash</option>
                                <option value="upi">UPI</option>
                                <option value="card">Card</option>
                            </select>
                            <select x-model="transactions.dateFilter" @change="filterTransactions" class="px-4 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                                <option value="all">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Transactions Summary -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Total Sales</h3>
                        <p class="text-2xl font-bold text-primary" x-text="'₹' + calculateTotalSales().toFixed(2)"></p>
                        <p class="text-sm text-gray-400" x-text="getDateRangeText()"></p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Transactions</h3>
                        <p class="text-2xl font-bold text-blue-500" x-text="transactions.filteredTransactions.length"></p>
                        <p class="text-sm text-gray-400" x-text="getDateRangeText()"></p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-medium mb-2">Average Bill</h3>
                        <p class="text-2xl font-bold text-green-500" x-text="'₹' + calculateAverageBill().toFixed(2)"></p>
                        <p class="text-sm text-gray-400" x-text="getDateRangeText()"></p>
                    </div>
                </div>
                
                <!-- Transactions Table -->
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-700">
                            <thead class="bg-gray-900">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Bill #</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Customer</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Total</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Payment</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-gray-800 divide-y divide-gray-700">
                                <template x-for="transaction in transactions.filteredTransactions" :key="transaction.id">
                                    <tr class="hover:bg-gray-700">
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="transaction.id"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="new Date(transaction.date).toLocaleString()"></td>
                                        <td class="px-6 py-4 whitespace-nowrap" x-text="transaction.customerName"></td>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium" x-text="'₹' + transaction.total.toFixed(2)"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="{
                                                'bg-green-900 text-green-300': transaction.paymentMethod === 'cash',
                                                'bg-blue-900 text-blue-300': transaction.paymentMethod === 'upi',
                                                'bg-purple-900 text-purple-300': transaction.paymentMethod === 'card'
                                            }" class="px-2 py-1 rounded-full text-xs">
                                                <span x-text="transaction.paymentMethod.toUpperCase()"></span>
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex space-x-2">
                                                <button @click="viewTransactionDetails(transaction)" class="text-blue-400 hover:text-blue-300">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button @click="printBill(transaction)" class="text-green-400 hover:text-green-300">
                                                    <i class="fas fa-print"></i>
                                                </button>
                                                <button @click="deleteTransaction(transaction.id)" class="text-red-400 hover:text-red-300">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </template>
                                <tr x-show="transactions.filteredTransactions.length === 0">
                                    <td colspan="6" class="px-6 py-4 text-center text-gray-400">No transactions found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Transaction Details Modal -->
                <div x-show="transactions.showDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    <div class="bg-gray-800 rounded-lg shadow-lg p-6 w-full max-w-2xl">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold">Bill Details</h3>
                            <button @click="transactions.showDetailsModal = false" class="text-gray-400 hover:text-white">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div>
                                <p class="text-sm text-gray-400">Bill Number</p>
                                <p class="font-medium" x-text="transactions.viewTransaction.id"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Date & Time</p>
                                <p class="font-medium" x-text="new Date(transactions.viewTransaction.date).toLocaleString()"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Customer</p>
                                <p class="font-medium" x-text="transactions.viewTransaction.customerName"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Phone</p>
                                <p class="font-medium" x-text="transactions.viewTransaction.customerPhone"></p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-400">Payment Method</p>
                                <p class="font-medium capitalize" x-text="transactions.viewTransaction.paymentMethod"></p>
                            </div>
                            <div x-show="transactions.viewTransaction.transactionId">
                                <p class="text-sm text-gray-400">Transaction ID</p>
                                <p class="font-medium" x-text="transactions.viewTransaction.transactionId"></p>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="text-lg font-medium mb-2">Items</h4>
                            <div class="bg-gray-700 rounded-md overflow-hidden">
                                <table class="min-w-full divide-y divide-gray-600">
                                    <thead class="bg-gray-800">
                                        <tr>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Item</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Price</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Quantity</th>
                                            <th class="px-4 py-2 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-600">
                                        <template x-for="(item, index) in transactions.viewTransaction.items" :key="index">
                                            <tr>
                                                <td class="px-4 py-2" x-text="item.name"></td>
                                                <td class="px-4 py-2" x-text="'₹' + item.price.toFixed(2)"></td>
                                                <td class="px-4 py-2" x-text="item.quantity"></td>
                                                <td class="px-4 py-2" x-text="'₹' + (item.price * item.quantity).toFixed(2)"></td>
                                            </tr>
                                        </template>
                                    </tbody>
                                    <tfoot class="bg-gray-800">
                                        <tr>
                                            <td colspan="3" class="px-4 py-2 text-right font-medium">Subtotal:</td>
                                            <td class="px-4 py-2 font-medium" x-text="'₹' + transactions.viewTransaction.subtotal.toFixed(2)"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="px-4 py-2 text-right font-medium">GST (18%):</td>
                                            <td class="px-4 py-2 font-medium" x-text="'₹' + transactions.viewTransaction.tax.toFixed(2)"></td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" class="px-4 py-2 text-right font-bold">Total:</td>
                                            <td class="px-4 py-2 font-bold text-primary" x-text="'₹' + transactions.viewTransaction.total.toFixed(2)"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                        
                        <div x-show="transactions.viewTransaction.notes" class="mb-4">
                            <h4 class="text-lg font-medium mb-2">Notes</h4>
                            <p class="bg-gray-700 p-3 rounded-md" x-text="transactions.viewTransaction.notes"></p>
                        </div>
                        
                        <div class="flex justify-end space-x-3">
                            <button @click="transactions.showDetailsModal = false" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded-md">
                                Close
                            </button>
                            <button @click="printBill(transactions.viewTransaction)" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md">
                                <i class="fas fa-print mr-1"></i> Print
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Todo Section -->
            <section x-show="currentSection === 'todo' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">To-Do List</h2>
                
                <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                    <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                        <h3 class="text-lg font-semibold">Tasks</h3>
                        <button @click="showAddTodoForm = true" class="bg-primary hover:bg-blue-700 text-white px-3 py-1 rounded-md text-sm">
                            <i class="fas fa-plus mr-1"></i> Add Task
                        </button>
                    </div>
                    
                    <!-- Add Todo Form -->
                    <div x-show="showAddTodoForm" class="p-4 bg-gray-700 border-b border-gray-600">
                        <form @submit.prevent="addTodo" class="flex gap-2">
                            <input type="text" x-model="newTodo" placeholder="Enter new task..." class="flex-1 px-3 py-2 bg-gray-600 border border-gray-500 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Add
                            </button>
                            <button type="button" @click="showAddTodoForm = false" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-md">
                                Cancel
                            </button>
                        </form>
                    </div>
                    
                    <div class="p-4">
                        <ul class="divide-y divide-gray-700">
                            <template x-for="(todo, index) in todos" :key="index">
                                <li class="py-3 flex items-center justify-between">
                                    <div class="flex items-center">
                                        <input type="checkbox" :id="'todo-' + index" x-model="todo.completed" @change="saveTodos" class="mr-3 rounded bg-gray-700 border-gray-600 text-primary focus:ring-primary">
                                        <div>
                                            <label :for="'todo-' + index" :class="{'line-through text-gray-500': todo.completed}" x-text="todo.text"></label>
                                            <p class="text-xs text-gray-400" x-text="formatDate(todo.date)"></p>
                                        </div>
                                    </div>
                                    <button @click="deleteTodo(index)" class="text-red-400 hover:text-red-300">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </li>
                            </template>
                            <li x-show="todos.length === 0" class="py-3 text-center text-gray-400">
                                No tasks added yet
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Security Section -->
            <section x-show="currentSection === 'security' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Security</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- App Lock Settings -->
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">App Lock</h3>
                        <div class="mb-4">
                            <label class="flex items-center">
                                <input type="checkbox" x-model="security.appLockEnabled" class="rounded bg-gray-700 border-gray-600 text-primary focus:ring-primary">
                                <span class="ml-2">Enable App Lock</span>
                            </label>
                            <p class="text-sm text-gray-400 mt-1">Lock the app after a period of inactivity</p>
                        </div>
                        <div class="mb-4" x-show="security.appLockEnabled">
                            <label for="lock-timeout" class="block text-sm font-medium mb-1">Lock Timeout (minutes)</label>
                            <input type="number" id="lock-timeout" x-model.number="security.lockTimeout" min="1" max="60" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <div class="mb-4" x-show="security.appLockEnabled">
                            <label for="lock-pin" class="block text-sm font-medium mb-1">PIN Code (4 digits)</label>
                            <input type="password" id="lock-pin" x-model="security.lockPin" maxlength="4" placeholder="Enter 4-digit PIN" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                        </div>
                        <button @click="saveSecuritySettings" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                            Save Settings
                        </button>
                    </div>
                    
                    <!-- Login History -->
                    <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden">
                        <div class="p-4 border-b border-gray-700">
                            <h3 class="text-lg font-semibold">Login History</h3>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-700">
                                <thead class="bg-gray-900">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Date & Time</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Device</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">IP Address</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-gray-800 divide-y divide-gray-700">
                                    <template x-for="(login, index) in security.loginHistory" :key="index">
                                        <tr class="hover:bg-gray-700">
                                            <td class="px-6 py-4 whitespace-nowrap" x-text="new Date(login.date).toLocaleString()"></td>
                                            <td class="px-6 py-4 whitespace-nowrap" x-text="login.device"></td>
                                            <td class="px-6 py-4 whitespace-nowrap" x-text="login.ip"></td>
                                        </tr>
                                    </template>
                                    <tr x-show="security.loginHistory.length === 0">
                                        <td colspan="3" class="px-6 py-4 text-center text-gray-400">No login history</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section x-show="currentSection === 'settings' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Settings</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Shop Settings -->
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Shop Information</h3>
                        <form @submit.prevent="saveShopSettings">
                            <div class="mb-4">
                                <label for="shop-name" class="block text-sm font-medium mb-1">Shop Name</label>
                                <input type="text" id="shop-name" x-model="settings.shopName" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="shop-phone" class="block text-sm font-medium mb-1">Phone Number</label>
                                <input type="tel" id="shop-phone" x-model="settings.shopPhone" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="shop-email" class="block text-sm font-medium mb-1">Email</label>
                                <input type="email" id="shop-email" x-model="settings.shopEmail" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="shop-address" class="block text-sm font-medium mb-1">Address</label>
                                <textarea id="shop-address" x-model="settings.shopAddress" rows="3" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                            <div class="mb-4">
                                <label for="shop-gst" class="block text-sm font-medium mb-1">GST Number</label>
                                <input type="text" id="shop-gst" x-model="settings.shopGST" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="shop-upi" class="block text-sm font-medium mb-1">UPI ID</label>
                                <input type="text" id="shop-upi" x-model="settings.upiId" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Save Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Billing Settings -->
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Billing Settings</h3>
                        <form @submit.prevent="saveShopSettings">
                            <div class="mb-4">
                                <label for="tax-rate" class="block text-sm font-medium mb-1">Tax Rate (%)</label>
                                <input type="number" id="tax-rate" x-model.number="settings.taxRate" min="0" max="100" step="0.01" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="bill-prefix" class="block text-sm font-medium mb-1">Bill Number Prefix</label>
                                <input type="text" id="bill-prefix" x-model="settings.billPrefix" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="bill-footer" class="block text-sm font-medium mb-1">Bill Footer Text</label>
                                <textarea id="bill-footer" x-model="settings.billFooter" rows="3" class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary"></textarea>
                            </div>
                            <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Save Settings
                            </button>
                        </form>
                    </div>
                    
                    <!-- Change Password -->
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Change Password</h3>
                        <form @submit.prevent="changePassword">
                            <div class="mb-4">
                                <label for="current-password" class="block text-sm font-medium mb-1">Current Password</label>
                                <input type="password" id="current-password" x-model="settings.currentPassword" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="new-password" class="block text-sm font-medium mb-1">New Password</label>
                                <input type="password" id="new-password" x-model="settings.newPassword" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <div class="mb-4">
                                <label for="confirm-password" class="block text-sm font-medium mb-1">Confirm New Password</label>
                                <input type="password" id="confirm-password" x-model="settings.confirmPassword" required class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-primary">
                            </div>
                            <p x-show="settings.passwordError" class="text-red-500 mb-4" x-text="settings.passwordError"></p>
                            <button type="submit" class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Change Password
                            </button>
                        </form>
                    </div>
                    
                    <!-- Data Management -->
                    <div class="bg-gray-800 p-4 rounded-lg shadow-md">
                        <h3 class="text-lg font-semibold mb-4">Data Management</h3>
                        <div class="mb-4">
                            <h4 class="text-md font-medium mb-2">Export Data</h4>
                            <div class="flex flex-wrap gap-2">
                                <button @click="exportData('inventory')" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-download mr-1"></i> Inventory
                                </button>
                                <button @click="exportData('customers')" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-download mr-1"></i> Customers
                                </button>
                                <button @click="exportData('transactions')" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-download mr-1"></i> Transactions
                                </button>
                                <button @click="exportData('all')" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-download mr-1"></i> All Data
                                </button>
                            </div>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-md font-medium mb-2">Import Data</h4>
                            <div class="border-2 border-dashed border-gray-600 rounded-md p-4 text-center">
                                <label for="import-file" class="cursor-pointer">
                                    <i class="fas fa-file-upload text-2xl mb-2"></i>
                                    <p>Click to select file or drag and drop</p>
                                    <input id="import-file" type="file" accept=".json" class="hidden" @change="handleImportFile">
                                </label>
                                <p x-show="settings.importFile" class="mt-2 text-green-400 text-sm" x-text="'Selected: ' + settings.importFile"></p>
                            </div>
                            <button @click="importData" :disabled="!settings.importFile" :class="{'opacity-50 cursor-not-allowed': !settings.importFile}" class="mt-2 bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-md">
                                Import Data
                            </button>
                        </div>
                        <div class="mb-4">
                            <h4 class="text-md font-medium mb-2">Danger Zone</h4>
                            <div class="flex flex-wrap gap-2">
                                <button @click="confirmClearData" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-trash-alt mr-1"></i> Clear All Data
                                </button>
                                <button @click="confirmDeleteAccount" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-sm">
                                    <i class="fas fa-user-slash mr-1"></i> Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Privacy Section -->
            <section x-show="currentSection === 'privacy' && user" class="max-w-6xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-primary">Privacy Policy</h2>
                
                <div class="bg-gray-800 p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4">BillWalla Privacy Policy</h3>
                    
                    <div class="prose prose-invert max-w-none">
                        <p class="mb-4">
                            BillWalla is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and safeguard your information when you use our application.
                        </p>
                        
                        <h4 class="text-lg font-medium mt-6 mb-2">Information We Collect</h4>
                        <p class="mb-4">
                            We collect information that you provide directly to us, such as your name, email address, and shop details when you register for an account. We also collect information about your transactions, inventory, and customers that you input into the application.
                        </p>
                        
                        <h4 class="text-lg font-medium mt-6 mb-2">How We Use Your Information</h4>
                        <p class="mb-4">
                            We use the information we collect to provide, maintain, and improve our services, to process your transactions, and to communicate with you. Your data is stored locally on your device and is not shared with third parties without your consent.
                        </p>
                        
                        <h4 class="text-lg font-medium mt-6 mb-2">Data Security</h4>
                        <p class="mb-4">
                            We implement appropriate security measures to protect your personal information. However, no method of transmission over the Internet or electronic storage is 100% secure, so we cannot guarantee absolute security.
                        </p>
                        
                        <h4 class="text-lg font-medium mt-6 mb-2">Changes to This Privacy Policy</h4>
                        <p class="mb-4">
                            We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page.
                        </p>
                        
                        <h4 class="text-lg font-medium mt-6 mb-2">Contact Us</h4>
                        <p class="mb-4">
                            If you have any questions about this Privacy Policy, please contact us at support@billwalla.com.
                        </p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 border-t border-gray-700 fixed bottom-0 w-full">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <p class="text-sm text-gray-400">© 2023 BillWalla. All rights reserved.</p>
                <div class="flex items-center">
                    <a href="#" class="text-gray-400 hover:text-white mx-2">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white mx-2">
                        <i class="fab fa-instagram"></i>
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <!-- App.js Script -->
    <script src="app.js"></script>
</body>
</html>
